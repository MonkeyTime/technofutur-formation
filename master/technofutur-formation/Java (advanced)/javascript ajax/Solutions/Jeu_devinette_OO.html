<html>
<head><title>Exemple 25</title>
<h1>Devinette numérique</h1>
<p>J'ai un nombre entre 1 et 100 (compris). Pouvez vous le deviner en moins de 10 essais ?</p>

<script type="text/javascript">


function Jeu(nombre, chances){
	// Variables
	this.nombre = nombre;
	this.chances = chances;
	
	// Fonctions
	this.demarrerPartie = demarrerPartie;
	this.estNombreCorrect = estNombreCorrect;
	this.verifierProposition = verifierProposition;
}

function demarrerPartie(){
	proposition = null;
	do
	{
		propositionText = prompt("Entrez une proposition","");
		if ( this.estNombreCorrect(propositionText) ){
			proposition = parseInt(propositionText);
			this.chances--;
			this.verifierProposition(proposition);	
		}
		
		
	}while (this.chances > 0 && proposition != this.nombre && propositionText!=null);
	
	if(proposition == nombre)
	{
		document.write("<div>Félicitation. Vous avez gagné.\nLe nombre était bien " + nombre + "</div>");
	}
	else
	{
		document.write("<div>Désolé, vous avez perdu.\nLe nombre était " + nombre + "</div>");
	}
}

function estNombreCorrect(propositionText){
	if(propositionText==null )
	{
		document.write("<div>Vous avez choisi d'abandonner la partie.</div>");
		return false;
	}
	else if(isNaN(propositionText) )
	{
		document.write("<div>\""+propositionText+"\" n'est pas un nombre.</div>");
		return false;
	}
	else if(propositionText=="")
	{
		document.write("<div>Veuillez entrer une proposition.</div>");
		return false;
	}
	return true;
}

function verifierProposition(proposition){
	if(proposition > this.nombre)
	{
		document.write("<div>Mon nombre est plus petit que " + proposition + "</div>");
	}
	else if(proposition < this.nombre)
	{
		document.write("<div>Mon nombre est plus grand que " + proposition + "</div>");
	}
	if(proposition != this.nombre)
	{
		document.write("<div>Il vous reste " + this.chances + " chances</div>");
	}		
}


nombre = Math.floor(Math.random()*100)+1;
chances = 10;

var jeu = new Jeu(nombre,chances);
jeu.demarrerPartie();

</script>
</head>
<body>

</body></html>